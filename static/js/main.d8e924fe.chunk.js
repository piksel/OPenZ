(this.webpackJsonpopenz=this.webpackJsonpopenz||[]).push([[0],{14:function(e,n,t){e.exports=t(23)},19:function(e,n,t){},20:function(e,n,t){},23:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(10),i=t.n(o),l=(t(19),t(5)),c=t(3),u=t(1),d=(t(20),t(4)),s=t.n(d),m=a.a.createContext({webmidi:s.a,init:function(){},initialized:!1,inputs:[]}),p=m.Provider,f=(m.Consumer,m.displayName,p),g=t(2),b=function(e){return e.green?e.theme.colors.green:e.blue?e.theme.colors.blue:e.yellow?e.theme.colors.yellow:e.red?e.theme.colors.red:e.theme.colors.secondary},v=function(e){return function(n){return e(Object(l.a)({},n,{propColor:b(n)}))}};function h(){var e=Object(g.a)(["\n    color: ",";\n    border-color: ",";\n  "]);return h=function(){return e},e}function y(){var e=Object(g.a)(["\n    background: ",";\n    color: white;\n  "]);return y=function(){return e},e}var w=u.c.button.withConfig({componentId:"oxiyve-0"})(["background:transparent;border-radius:3px;border:2px solid transparent;margin:0.5em 1em;padding:0.25em 1em;",""],v((function(e){return e.primary?Object(u.b)(y(),b(e)):Object(u.b)(h(),b(e),b(e))})));function E(){var e=Object(g.a)(["\n    color: ",";\n    border-color: ",";\n  "]);return E=function(){return e},e}function j(){var e=Object(g.a)(["\n    background: ",";\n    color: white;\n  "]);return j=function(){return e},e}var O=u.c.select.withConfig({componentId:"sc-166z4c6-0"})(["background:transparent;border-radius:3px;border:2px solid transparent;margin:0.5em 1em;padding:0.25em 1em;"," option{background:",";padding:.4rem .1rem;}"],v((function(e){return e.primary?Object(u.b)(j(),b(e)):Object(u.b)(E(),b(e),b(e))})),(function(e){return e.theme.colors.background}));function x(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: ",";\n  flex: ",";\n  justify-content: ",";\n  user-select: none;\n"]);return x=function(){return e},e}var S=u.c.div(x(),(function(e){return e.row?"row":e.col?"column":"inherit"}),(function(e){return e.fill?"1":"none"}),(function(e){return e.stretch?"stretch":"normal"}));function k(){var e=Object(g.a)(["      \n    font-size: 6rem;\n    line-height: 1em;\n    width: 2em;\n    text-align: center;\n    font-weight: 300;\n    height: 1em;\n    margin: -.5rem 0 0 0;\n    opacity: ",";\n"]);return k=function(){return e},e}var C=u.c.h2(k(),(function(e){return e.disabled?.5:1})),A={borderRadius:"5px",colors:{main:"#f5b900",secondary:"#f0f0f0",green:"#1c6406",blue:"#0062f5",yellow:"#f5b900",red:"#ab0b0b",background:"#707070"}},L=["Param 1","Param 2","Filter","Resonance"],F=["Attack","Decay","Sustain","Release"],z=["LFO Amount","LFO Speed","LFO Target","LFO Shape"],R=["FX1 Send","FX2 Send","Pan","Level"],I=[["Pitch","Reverse","Filter","Resonance"],F,z,R],M=[L,F,z,R],P=[L,F,["Arp. Speed","Arp. Pattern","Arp. Style","Arp. Range"],R],B=[L,z],D=Array.from(Array(4),(function(e,n){return Array.from(Array(4),(function(e,t){return(4*n+t).toString(10).padStart(2,"0")}))})),T=[{group:"",params:[["---","---","---","---"]]},{group:"KCK",params:I},{group:"SNR",params:I},{group:"PCS",params:I},{group:"SMP",params:I},{group:"BAS",params:M},{group:"LEA",params:M},{group:"ARP",params:P},{group:"CHO",params:M},{group:"FX1",params:B},{group:"FX2",params:B},{group:"TAP",params:[["Speed","Fine Tune","Filter","Resonance"],R]},{group:"MAS",params:[["Chorus","Drive","Filter","Resonance"]]},{group:"PRF",params:[[]]},{group:"MOD",params:D},{group:"LGT",params:[["Color","Alt Color","Speed","Intensity"],D[1]]},{group:"MTN",params:[[]]}],X=function(e){var n=e.value,t=e.label,r=e.color;return a.a.createElement(S,{col:!0,style:{height:"5rem"}},a.a.createElement("div",{style:{textAlign:"right",fontSize:"4rem",fontWeight:300,lineHeight:"1em",height:"1em",marginTop:"-.5rem",width:"8rem"}},n),a.a.createElement(S,{row:!0,style:{alignItems:"center",justifyContent:"space-between"}},a.a.createElement("div",{style:{width:"1.2rem",height:"1.2rem",borderRadius:"50%",background:null!==r&&void 0!==r?r:"transparent"}}),a.a.createElement("div",{style:{textAlign:"right",fontSize:"1.2rem"}},t)))};function N(){var e=Object(g.a)(["\n  flex: 1;\n"]);return N=function(){return e},e}var W=u.c.div(N());function G(){var e=Object(g.a)(["\n    background-color: ","\n  "]);return G=function(){return e},e}var K,J=function(e){var n,t=e.wheels;return a.a.createElement(S,{row:!0,fill:!0},a.a.createElement(C,null,null===(n=T[t[0].channel])||void 0===n?void 0:n.group),a.a.createElement(W,null),t.map((function(e,n){var t=e.value,r=e.channel,o=e.page;return a.a.createElement(U,{key:n,index:n,value:t,channel:r,page:o})})))},H=u.c.div.withConfig({componentId:"vsylc1-0"})(["border-radius:50%;color:black;",""],v((function(e){return Object(u.b)(G(),e.propColor)}))),q=["#ffffff","#1fc400","#6300c1","#e99500"],U=function(e){var n,t=e.index,r=e.value,o=e.channel,i=e.page,l=(T[o]||{params:[[]]}).params,c="number"===typeof r,u=c?Math.ceil((null!==r&&void 0!==r?r:0)/1.28).toFixed(0):"XX",d=2.109375*(null!==r&&void 0!==r?r:64)-135;return a.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:"0 1rem",border:"1px #ff00ff00 dashed",opacity:c?1:.5}},a.a.createElement(H,{style:{transform:"rotateZ(".concat(d,"deg)"),width:"5rem",height:"5rem",marginRight:".5rem"},green:0===t,blue:1===t,yellow:2===t,red:3===t},a.a.createElement("div",{style:{marginLeft:"auto",marginRight:"auto",background:"black",width:"2px",height:"50%"}})),a.a.createElement(X,{value:"".concat(u,"%"),color:q[i],label:(null===(n=l[i])||void 0===n?void 0:n[t])||"\ud83e\udd37\u200d 0x".concat(o.toString(16).padStart(2,"0")," ").concat(t.toString(16).padStart(2,"0"))}))};!function(e){e[e.Clock=248]="Clock",e[e.Start=250]="Start",e[e.Continue=251]="Continue",e[e.Stop=252]="Stop"}(K||(K={}));var Y=["F","F\u266f","G","G\u266f","A","A\u266f","B","C","C\u266f","D","D\u266f","E","F","G\u266d","G","A\u266d","A","B\u266d","B","C","D\u266d","D","E\u266d","E"];function Z(){var e=Object(g.a)(["box-shadow: 0 0 .1rem #ff518c"]);return Z=function(){return e},e}function $(){var e=Object(g.a)(["\n      background-color: ",";\n      color: black;\n      height: 10rem;\n      flex: 3;\n      width: 3rem;\n      border-right: .1rem solid black;\n  "]);return $=function(){return e},e}function Q(){var e=Object(g.a)(["\n      background-color: ",";\n      color: white;\n      height: 6rem;\n      margin: 0 -2.38095238095238%;\n      //position: absolute;\n      width: 2rem;\n      z-index: 2;\n      flex: 2;\n      \n  "]);return Q=function(){return e},e}var V=u.c.div.withConfig({componentId:"sc-2ei0kd-0"})(["user-select:none;vertical-align:bottom;display:flex;align-items:flex-end;justify-content:center;border-radius:.5rem;border-top:.1rem solid black;font-size:1.4rem;font-weight:300;padding-bottom:.5rem;pointer-events:all;"," ",""],(function(e){return e.black?Object(u.b)(Q(),e.pressed?"hsl(".concat(e.noteColor,", 90%, 30%)"):"black"):Object(u.b)($(),e.pressed?"hsl(".concat(e.noteColor,", 90%, 70%)"):"white")}),(function(e){return e.pressed&&Object(u.b)(Z())})),_=function(e){var n=e.notes,t=e.onKeyClicked;return a.a.createElement("div",{style:{display:"flex",flexDirection:"row",position:"relative"}},n.map((function(e,n){var r=e.pressed,o=e.instrument,i=n%12,l=n>18?5:n>6?4:3,c=Y[n],u=c.replace("\u266f","#").replace("\u266d","b"),d=[1,3,5,8,10].includes(i),s=function(){return t(u,l,!0)},m=function(){return t(u,l,!1)};return a.a.createElement(V,{pressed:r,black:d,onMouseDown:s,onMouseUp:m,onMouseLeave:m,noteColor:45*o,onMouseEnter:function(e){return 1===e.buttons&&s()},key:n},c)})))},ee=function(e){var n=e.state,t=e.number,r=n.playing,o=n.note,i="hsl(".concat((t+1)%8*45,", 90%, 70%)"),l=T[t+1].group;return a.a.createElement(S,{col:!0,style:{height:"7rem",color:r?"white":i}},a.a.createElement("div",{style:{textAlign:"center",fontSize:"4rem",fontWeight:300,lineHeight:"1em",height:"1em",marginTop:"-.5rem",width:"8rem",opacity:r?1:.2}},"undefined"===typeof o?"":Y[o]),a.a.createElement("div",{style:{textAlign:"center",fontSize:"2.2rem",fontWeight:300,background:r?i:"#ffffff20"}},l))},ne=function(e){var n=e.channels,t=e.notes;return a.a.createElement(a.a.Fragment,null,a.a.createElement(S,{stretch:!0,row:!0,style:{padding:"2rem",flexWrap:"wrap",height:"14rem"}},n.map((function(e,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement(S,{row:!0,style:{width:"12.5%",justifyContent:"center"}},a.a.createElement(ee,{state:e,number:n})))}))),a.a.createElement("div",{style:{padding:"2rem"}},a.a.createElement(_,{notes:t,onKeyClicked:function(){}})))},te=function(e){var n=e.notes,t=e.wheels,r=e.keyClicked;return a.a.createElement(a.a.Fragment,null,a.a.createElement(S,{stretch:!0,row:!0,style:{padding:"2rem",height:"14rem"}},a.a.createElement(J,{wheels:t})),a.a.createElement("div",{style:{padding:"2rem"}},a.a.createElement(_,{notes:n,onKeyClicked:r})))},re=u.c.div.withConfig({componentId:"sc-19x7a5j-0"})(["display:flex;padding:0 .5rem;align-items:center;flex-direction:row;"]),ae=re,oe=u.c.div.withConfig({componentId:"sc-19x7a5j-1"})(["background:",";display:flex;flex-direction:column;justify-content:center;color:white;min-height:100vh;"],(function(e){return e.theme.colors.background})),ie=u.c.div.withConfig({componentId:"sc-19x7a5j-2"})(["display:flex;flex-direction:row;align-items:center;justify-content:space-between;"]),le=u.c.div.withConfig({componentId:"sc-19x7a5j-3"})(["display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;flex:1;"]),ce=function(){var e,n,t,o,i,d,m,p=Object(r.useState)(),g=Object(c.a)(p,2),b=g[0],v=g[1],h=Object(r.useState)(),y=Object(c.a)(h,2),E=y[0],j=y[1],x=Object(r.useState)(0),k=Object(c.a)(x,2),L=k[0],F=k[1],z=Object(r.useState)(Array.from(new Array(16),(function(e){return{playing:!1}}))),R=Object(c.a)(z,2),I=R[0],M=R[1],P=Object(r.useState)({}),B=Object(c.a)(P,2),D=B[0],T=B[1],N=Object(r.useState)(Array.from(new Array(24),(function(e){return{pressed:!1,instrument:0}}))),W=Object(c.a)(N,2),G=W[0],J=W[1],H=Object(r.useState)(Array.from(new Array(4),(function(e){return{channel:0,page:0}}))),q=Object(c.a)(H,2),U=q[0],Y=q[1],Z=Object(r.useState)({bpm:0,playing:!1}),$=Object(c.a)(Z,2),Q=$[0],V=$[1],_=Object(r.useState)({lastBeat:0,pulses:0}),ee=Object(c.a)(_,2)[1],ce=function(e,n,t){var r=(e.number-5)%24;M((function(e){return e.map((function(e,a){return a===n-1?{playing:t,note:r}:e}))})),F(n),J((function(e){return e.map((function(e,a){return a===r?{pressed:t,instrument:n}:e}))}))};Object(r.useEffect)((function(){console.log("init!"),s.a.enable((function(e){e||(s.a.addListener("connected",(function(e){console.log("Connected!",e)})),s.a.addListener("disconnected",(function(e){console.log("Disconnected!",e)}))),me((function(n){return Object(l.a)({},n,{error:e,initialized:!e,inputs:s.a.inputs})}))}))}),[]),Object(r.useEffect)((function(){window.opz=b;var e=function(e){var n;console.log(e.type,(n=e.data,Array.from(n).map((function(e){return e.toString(16).padStart(2,"0")})).join(" ")))};null===b||void 0===b||b.removeListener(),null===b||void 0===b||b.addListener("controlchange","all",(function(e){return function(e,n,t){var r=(e.number-1)%4,a=Math.floor((e.number-r)/4);Y((function(e){return e.map((function(e,o){return o===r?{value:t,channel:n,page:a}:{page:a,channel:n,value:e.page===a&&e.channel===n?e.value:void 0}}))}))}(e.controller,e.channel,e.value)})),null===b||void 0===b||b.addListener("noteon","all",(function(e){return ce(e.note,e.channel,!0)})),null===b||void 0===b||b.addListener("noteoff","all",(function(e){return ce(e.note,e.channel,!1)})),null===b||void 0===b||b.addListener("clock","all",(function(e){return n=e.data[0],t=e.timestamp,void(n===K.Clock?ee((function(e){return 47===e.pulses?(V((function(n){return Object(l.a)({},n,{bpm:Math.round(12e4/(t-e.lastBeat))})})),{lastBeat:t,pulses:0}):{lastBeat:e.lastBeat||t,pulses:e.pulses+1}})):V((function(e){return Object(l.a)({},e,{playing:n!==K.Stop})})));var n,t})),null===b||void 0===b||b.addListener("channelmode","all",e),null===b||void 0===b||b.addListener("activesensing","all",e),null===b||void 0===b||b.addListener("songposition","all",e),null===b||void 0===b||b.addListener("sysex","all",e),null===b||void 0===b||b.addListener("unknownsystemmessage","all",e),null===b||void 0===b||b.addListener("tuningrequest","all",e),null===b||void 0===b||b.addListener("programchange","all",(function(e){return T((function(n){return Object(l.a)({},n,{number:e.channel,pattern:e.value})}))})),null===b||void 0===b||b.addListener("reset","all",e),null===b||void 0===b||b.addListener("start","all",(function(){return T((function(e){return Object(l.a)({},e,{playing:!0})}))})),null===b||void 0===b||b.addListener("stop","all",(function(){return T((function(e){return Object(l.a)({},e,{playing:!1})}))}))}),[b]),Object(r.useEffect)((function(){window.opzo=E}),[E]);var ue=Object(r.useState)({webmidi:s.a,init:function(){},initialized:!1,inputs:[]}),de=Object(c.a)(ue,2),se=de[0],me=de[1];Object(r.useEffect)((function(){!b&&se.inputs.length>0&&v(se.inputs[0]),!E&&se.webmidi.outputs.length>0&&j(se.webmidi.outputs[0])}),[se,b,E]);return a.a.createElement(u.a,{theme:A},a.a.createElement(f,{value:se},a.a.createElement(oe,null,a.a.createElement(ie,null,a.a.createElement(re,null,"MIDI",a.a.createElement(w,{primary:!0,blue:!0,disabled:se.initialized,onClick:function(){return se.init()}},se.initialized?"Enabled!":"Enable"),a.a.createElement("pre",null,null!==(e=null===se||void 0===se?void 0:se.error)&&void 0!==e?e:""),a.a.createElement("label",null,"Input:",a.a.createElement(O,{value:null===b||void 0===b?void 0:b.id,onChange:function(e){return v(se.inputs.find((function(n){return n.id==e.target.value})))}},a.a.createElement("option",{value:""},se.inputs.length>0?"Select a midi input":"No inputs detected"),se.inputs.map((function(e){return a.a.createElement("option",{key:e.id,value:e.id},e.name)})))),a.a.createElement("label",null,"Output:",a.a.createElement(O,{value:null===E||void 0===E?void 0:E.id,onChange:function(e){return j(s.a.outputs.find((function(n){return n.id==e.target.value})))}},a.a.createElement("option",{value:""},s.a.outputs.length>0?"Select a midi output":"No outputs detected"),se.webmidi.outputs.map((function(e){var n=e.id,t=e.name;return a.a.createElement("option",{key:n,value:n},t)}))))),a.a.createElement(ae,null,a.a.createElement(a.a.Fragment,null))),a.a.createElement(le,null,a.a.createElement(S,{row:!0,style:{padding:"2rem",alignItems:"center",justifyContent:"space-between"}},a.a.createElement(S,{row:!0,style:{cursor:"pointer"},onClick:function(){return T((function(e){return Object(l.a)({},e,{playing:!e.playing})}))}},a.a.createElement(C,{disabled:D.playing},"JAM"),a.a.createElement(C,{style:{width:"2rem"}},"/"),a.a.createElement(C,{disabled:!D.playing},"PLY")),a.a.createElement(S,{row:!0},a.a.createElement(X,{value:null!==(n=null===(t=D.number)||void 0===t||null===(o=t.toString())||void 0===o?void 0:o.padStart(2,"0"))&&void 0!==n?n:"XX",label:"PROJECT"}),a.a.createElement(X,{value:null!==(i=null===(d=D.pattern)||void 0===d||null===(m=d.toString())||void 0===m?void 0:m.padStart(2,"0"))&&void 0!==i?i:"XX",label:"PATTERN"}),a.a.createElement(X,{value:Q.bpm.toFixed(0),label:"BPM"}))),D.playing?a.a.createElement(ne,{channels:I,notes:G}):a.a.createElement(te,{channel:L,notes:G,wheels:U,keyClicked:function(e,n,t){try{null===E||void 0===E||E.playNote("".concat(e).concat(n),L||1,{velocity:t?.5:0})}catch(r){console.error("Failed to play note ")}}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.d8e924fe.chunk.js.map