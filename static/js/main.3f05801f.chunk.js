(this.webpackJsonpopenz=this.webpackJsonpopenz||[]).push([[0],{15:function(e,n,t){e.exports=t(24)},20:function(e,n,t){},21:function(e,n,t){},24:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(11),i=t.n(a),c=(t(20),t(6)),l=t(5),u=t(1),d=(t(21),t(4)),s=t.n(d),m=o.a.createContext({webmidi:s.a,init:function(){},initialized:!1,inputs:[]}),p=m.Provider,f=(m.Consumer,m.displayName,p),b=t(2),v=function(e){return e.green?e.theme.colors.green:e.blue?e.theme.colors.blue:e.yellow?e.theme.colors.yellow:e.red?e.theme.colors.red:e.theme.colors.secondary},g=function(e){return function(n){return e(Object(c.a)({},n,{propColor:v(n)}))}};function h(){var e=Object(b.a)(["\n    color: ",";\n    border-color: ",";\n  "]);return h=function(){return e},e}function j(){var e=Object(b.a)(["\n    background: ",";\n    color: white;\n  "]);return j=function(){return e},e}var y=u.c.button.withConfig({componentId:"oxiyve-0"})(["background:transparent;border-radius:3px;border:2px solid transparent;margin:0.5em 1em;padding:0.25em 1em;",""],g((function(e){return e.primary?Object(u.b)(j(),v(e)):Object(u.b)(h(),v(e),v(e))})));function w(){var e=Object(b.a)(["\n    color: ",";\n    border-color: ",";\n  "]);return w=function(){return e},e}function O(){var e=Object(b.a)(["\n    background: ",";\n    color: white;\n  "]);return O=function(){return e},e}var x=u.c.select.withConfig({componentId:"sc-166z4c6-0"})(["background:transparent;border-radius:3px;border:2px solid transparent;margin:0.5em 1em;padding:0.25em 1em;"," option{background:",";padding:.4rem .1rem;}"],g((function(e){return e.primary?Object(u.b)(O(),v(e)):Object(u.b)(w(),v(e),v(e))})),(function(e){return e.theme.colors.background}));function E(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: ",";\n  flex: ",";\n"]);return E=function(){return e},e}var k,S=u.c.div(E(),(function(e){return e.row?"row":e.col?"column":"inherit"}),(function(e){return e.fill?"1":"none"})),C={borderRadius:"5px",colors:{main:"#f5b900",secondary:"#f0f0f0",green:"#1c6406",blue:"#0062f5",yellow:"#f5b900",red:"#ab0b0b",background:"#707070"}},L=t(3),A=["Param 1","Param 2","Filter","Resonance"],F=["Attack","Decay","Sustain","Release"],z=["LFO Amount","LFO Speed","LFO Target","LFO Shape"],I=["FX1 Send","FX2 Send","Pan","Level"],B=[["Pitch","Reverse","Filter","Resonance"],F,z,I],R=[A,F,z,I],M=[A,F,["Arp. Speed","Arp. Pattern","Arp. Style","Arp. Range"],I],P=[A,z],D=(k={},Object(L.a)(k,0,{group:"",params:[["---","---","---","---"]]}),Object(L.a)(k,1,{group:"KCK",params:B}),Object(L.a)(k,2,{group:"SNR",params:B}),Object(L.a)(k,3,{group:"HIH",params:B}),Object(L.a)(k,4,{group:"PCS",params:B}),Object(L.a)(k,5,{group:"BAS",params:R}),Object(L.a)(k,6,{group:"LEA",params:R}),Object(L.a)(k,7,{group:"ARP",params:M}),Object(L.a)(k,8,{group:"CHO",params:R}),Object(L.a)(k,9,{group:"FX1",params:P}),Object(L.a)(k,10,{group:"FX2",params:P}),k),N=function(e){var n=e.value,t=e.label,r=e.color;return o.a.createElement(S,{col:!0,style:{}},o.a.createElement("div",{style:{textAlign:"right",fontSize:"4rem",fontWeight:300,lineHeight:"4rem",marginTop:"-.5rem",width:"8rem"}},n),o.a.createElement(S,{row:!0,style:{alignItems:"center",justifyContent:"space-between"}},o.a.createElement("div",{style:{width:"1.2rem",height:"1.2rem",borderRadius:"50%",background:null!==r&&void 0!==r?r:"transparent"}}),o.a.createElement("div",{style:{textAlign:"right",fontSize:"1.2rem"}},t)))};function X(){var e=Object(b.a)(["\n    background-color: ","\n  "]);return X=function(){return e},e}var H=function(e){var n,t=e.wheels;return o.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"}},o.a.createElement("div",{style:{fontSize:"4rem",width:"10rem",textAlign:"center",fontWeight:300}},null===(n=D[t[0].channel])||void 0===n?void 0:n.group),t.map((function(e,n){var t=e.value,r=e.channel,a=e.page;return o.a.createElement(G,{key:n,index:n,value:t,channel:r,page:a})})))},K=u.c.div.withConfig({componentId:"vsylc1-0"})(["border-radius:50%;color:black;",""],g((function(e){return Object(u.b)(X(),e.propColor)}))),W=["#ffffff","#1fc400","#6300c1","#e99500"],G=function(e){var n,t=e.index,r=e.value,a=e.channel,i=e.page,c=(D[a]||{params:[[]]}).params,l="number"===typeof r,u=l?Math.ceil((null!==r&&void 0!==r?r:0)/1.28).toFixed(0):"XX",d=2.109375*(null!==r&&void 0!==r?r:64)-135;return o.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:"0 1rem",border:"1px #ff00ff00 dashed",opacity:l?1:.5}},o.a.createElement(K,{style:{transform:"rotateZ(".concat(d,"deg)"),width:"5rem",height:"5rem",marginRight:".5rem"},green:0===t,blue:1===t,yellow:2===t,red:3===t},o.a.createElement("div",{style:{marginLeft:"auto",marginRight:"auto",background:"black",width:"2px",height:"50%"}})),o.a.createElement(N,{value:"".concat(u,"%"),color:W[i],label:(null===(n=c[i])||void 0===n?void 0:n[t])||"\ud83e\udd37\u200d 0x".concat(a.toString(16).padStart(2,"0")," ").concat(t.toString(16).padStart(2,"0"))}))};function J(){var e=Object(b.a)(["box-shadow: 0 0 .1rem #ff518c"]);return J=function(){return e},e}function T(){var e=Object(b.a)(["\n      background-color: ",";\n      color: black;\n      height: 10rem;\n      flex: 3;\n      width: 3rem;\n      border-right: .1rem solid black;\n  "]);return T=function(){return e},e}function U(){var e=Object(b.a)(["\n      background-color: ",";\n      color: white;\n      height: 6rem;\n      margin: 0 -2.38095238095238%;\n      //position: absolute;\n      width: 2rem;\n      z-index: 2;\n      flex: 2;\n      \n  "]);return U=function(){return e},e}var q,Z=u.c.div.withConfig({componentId:"sc-2ei0kd-0"})(["user-select:none;vertical-align:bottom;display:flex;align-items:flex-end;justify-content:center;border-radius:.5rem;border-top:.1rem solid black;font-size:1.4rem;font-weight:300;padding-bottom:.5rem;pointer-events:all;"," ",""],(function(e){return e.black?Object(u.b)(U(),e.pressed?"hsl(".concat(e.noteColor,", 90%, 30%)"):"black"):Object(u.b)(T(),e.pressed?"hsl(".concat(e.noteColor,", 90%, 70%)"):"white")}),(function(e){return e.pressed&&Object(u.b)(J())})),$=["F","F#","G","G#","A","A#","B","C","C#","D","D#","E"],Q=function(e){var n=e.notes,t=e.onKeyClicked;return o.a.createElement("div",{style:{display:"flex",flexDirection:"row",position:"relative"}},n.map((function(e,n){var r=e.pressed,a=e.instrument,i=n%12,c=n>18?5:n>6?4:3,l=$[i],u=[1,3,5,8,10].includes(i),d=function(){return t(l,c,!0)},s=function(){return t(l,c,!1)};return o.a.createElement(Z,{pressed:r,black:u,onMouseDown:d,onMouseUp:s,onMouseLeave:s,noteColor:45*a,onMouseEnter:function(e){return 1===e.buttons&&d()},key:n},l)})))};!function(e){e[e.Clock=248]="Clock",e[e.Start=250]="Start",e[e.Continue=251]="Continue",e[e.Stop=252]="Stop"}(q||(q={}));var V=function(e){return Array.from(e).map((function(e){return e.toString(16).padStart(2,"0")})).join(" ")},Y=u.c.div.withConfig({componentId:"sc-19x7a5j-0"})(["display:flex;padding:0 .5rem;align-items:center;flex-direction:row;"]),_=Y,ee=u.c.div.withConfig({componentId:"sc-19x7a5j-1"})(["background:",";display:flex;flex-direction:column;justify-content:center;color:white;min-height:100vh;"],(function(e){return e.theme.colors.background})),ne=u.c.div.withConfig({componentId:"sc-19x7a5j-2"})(["display:flex;flex-direction:row;align-items:center;justify-content:space-between;"]),te=u.c.div.withConfig({componentId:"sc-19x7a5j-3"})(["display:flex;flex-direction:column;align-items:center;justify-content:flex-start;flex:1;"]),re=function(){var e,n=Object(r.useState)(),t=Object(l.a)(n,2),a=t[0],i=t[1],d=Object(r.useState)(),m=Object(l.a)(d,2),p=m[0],b=m[1],v=Object(r.useState)(0),g=Object(l.a)(v,2),h=g[0],j=g[1],w=Object(r.useState)(Array.from(new Array(24),(function(e){return{pressed:!1,instrument:0}}))),O=Object(l.a)(w,2),E=O[0],k=O[1],L=Object(r.useState)(0),A=Object(l.a)(L,2),F=(A[0],A[1],Object(r.useState)(Array.from(new Array(4),(function(e){return{channel:0,page:0}})))),z=Object(l.a)(F,2),I=z[0],B=z[1],R=Object(r.useState)({bpm:0,playing:!1}),M=Object(l.a)(R,2),P=M[0],D=M[1],X=Object(r.useState)({lastBeat:0,pulses:0}),K=Object(l.a)(X,2)[1],W=function(e,n,t){var r=(e.number-5)%24;j(n),k((function(e){return e.map((function(e,o){return o===r?{pressed:t,instrument:n}:e}))}))};Object(r.useEffect)((function(){console.log("init!"),s.a.enable((function(e){e||(s.a.addListener("connected",(function(e){console.log("Connected!",e)})),s.a.addListener("disconnected",(function(e){console.log("Disconnected!",e)}))),U((function(n){return Object(c.a)({},n,{error:e,initialized:!e,inputs:s.a.inputs})}))}))}),[]),Object(r.useEffect)((function(){window.opz=a;var e=function(e){console.log(e.type,V(e.data))};null===a||void 0===a||a.addListener("controlchange",void 0,(function(e){return function(e,n,t){var r=(e.number-1)%4,o=Math.floor((e.number-r)/4);B((function(e){return e.map((function(e,a){return a===r?{value:t,channel:n,page:o}:{page:o,channel:n,value:e.page===o&&e.channel===n?e.value:void 0}}))}))}(e.controller,e.channel,e.value)})),null===a||void 0===a||a.addListener("noteon",void 0,(function(e){return W(e.note,e.channel,!0)})),null===a||void 0===a||a.addListener("noteoff",void 0,(function(e){return W(e.note,e.channel,!1)})),null===a||void 0===a||a.addListener("clock",void 0,(function(e){return n=e.data[0],t=e.timestamp,void(n===q.Clock?K((function(e){return 47==e.pulses?(D((function(n){return Object(c.a)({},n,{bpm:Math.round(12e4/(t-e.lastBeat))})})),{lastBeat:t,pulses:0}):{lastBeat:e.lastBeat||t,pulses:e.pulses+1}})):D((function(e){return Object(c.a)({},e,{playing:n!==q.Stop})})));var n,t})),null===a||void 0===a||a.addListener("channelmode",void 0,e),null===a||void 0===a||a.addListener("activesensing",void 0,e),null===a||void 0===a||a.addListener("songposition",void 0,e),null===a||void 0===a||a.addListener("sysex",void 0,e),null===a||void 0===a||a.addListener("unknownsystemmessage",void 0,e),null===a||void 0===a||a.addListener("tuningrequest",void 0,e),null===a||void 0===a||a.addListener("programchange",void 0,e),null===a||void 0===a||a.addListener("reset",void 0,e),null===a||void 0===a||a.addListener("start",void 0,e),null===a||void 0===a||a.addListener("stop",void 0,e)}),[a]),Object(r.useEffect)((function(){window.opzo=p}),[p]);var G=Object(r.useState)({webmidi:s.a,init:function(){},initialized:!1,inputs:[]}),J=Object(l.a)(G,2),T=J[0],U=J[1];Object(r.useEffect)((function(){!a&&T.inputs.length>0&&i(T.inputs[0]),!p&&T.webmidi.outputs.length>0&&b(T.webmidi.outputs[0])}),[T,a,p]);var Z=["None","Kick","Snare","Hihat","Percussion","Bass","Lead","Arp","Chord","Fx 1","Fx 2"];return o.a.createElement(u.a,{theme:C},o.a.createElement(f,{value:T},o.a.createElement(ee,null,o.a.createElement(ne,null,o.a.createElement(Y,null,"MIDI",o.a.createElement(y,{primary:!0,blue:!0,disabled:T.initialized,onClick:function(){return T.init()}},T.initialized?"Enabled!":"Enable"),o.a.createElement("pre",null,null!==(e=null===T||void 0===T?void 0:T.error)&&void 0!==e?e:""),o.a.createElement("label",null,"Input:",o.a.createElement(x,{value:null===a||void 0===a?void 0:a.id,onChange:function(e){return i(T.inputs.find((function(n){return n.id==e.target.value})))}},o.a.createElement("option",{value:""},T.inputs.length>0?"Select a midi input":"No inputs detected"),T.inputs.map((function(e){return o.a.createElement("option",{key:e.id,value:e.id},e.name)})))),o.a.createElement("label",null,"Output:",o.a.createElement(x,{value:null===p||void 0===p?void 0:p.id,onChange:function(e){return b(s.a.outputs.find((function(n){return n.id==e.target.value})))}},o.a.createElement("option",{value:""},s.a.outputs.length>0?"Select a midi output":"No outputs detected"),T.webmidi.outputs.map((function(e){var n=e.id,t=e.name;return o.a.createElement("option",{key:n,value:n},t)}))))),o.a.createElement(_,null,o.a.createElement(o.a.Fragment,null))),o.a.createElement(te,null,o.a.createElement(S,{row:!0,style:{padding:"2rem"}},o.a.createElement(H,{wheels:I}),o.a.createElement(N,{value:P.bpm.toFixed(0),label:"BPM"})),o.a.createElement("div",{style:{padding:"2rem"}},"Instrument: ",Z.length>h?Z[h]:"Unknown (".concat(h,")"),o.a.createElement(Q,{notes:E,onKeyClicked:function(e,n,t){null===p||void 0===p||p.playNote("".concat(e).concat(n),h||1,{velocity:t?.5:0})}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.3f05801f.chunk.js.map